<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>轻云校园</title>
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/ripple.css">
    <link rel="stylesheet" href="css/waves.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script src="js/jquery-3.4.0.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/waves.js"></script>
    <script type="text/javascript" src="js/vue.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <!--    mui-->
    <link rel="stylesheet" href="css/mui.min.css">
	<script src="js/mui.min.js"></script>
    <script type="text/javascript">
        mui.init()
    </script>
    <style type="text/css">
        #list {
            /*避免导航边框和列表背景边框重叠，看起来像两条边框似得；*/
            margin-top: -1px;
        }
    </style>
	<style type="text/css">
		.mui-slider-item img{
			width: auto;
			height: 238px;
		}
		.mui-row img{
			height: 43px;
			width: 43px;
		}
        .mui-bar .mui-icon:active {
            opacity: 1
        }
	</style>
    <script type="text/javascript">
        mui.init({
            pullRefresh : {
                container:"#refreshContainer",//下拉刷新容器标识，querySelector能定位的css选择器均可，比如：id、.class等
                down : {
                    style:'circle',//必选，下拉刷新样式，目前支持原生5+ ‘circle’ 样式
                    color:'#2BD009', //可选，默认“#2BD009” 下拉刷新控件颜色
                    height:'50px',//可选,默认50px.下拉刷新控件的高度,
                    range:'100px', //可选 默认100px,控件可下拉拖拽的范围
                    offset:'0px', //可选 默认0px,下拉刷新控件的起始位置
                    auto: true,//可选,默认false.首次加载自动上拉刷新一次
                    callback :function (e) {
                        mui.ajax('https://api.caiyunapp.com/v2/TAkhjf8d1nlSlspN/121.6544,25.1552/forecast.jsonp?callback=MYCALLBACK',{
                            // data:{
                            //     username:'username',
                            //     password:'password'
                            // },
                            // crossDomain:true,
                            dataType:'jsonp',//服务器返回json格式数据
                            type:'get',//HTTP请求类型
                            timeout:10000,//超时时间设置为10秒；
                            headers:{'Content-Type':'text/html'},
                            success:function(data){
                                //服务器返回响应，根据响应结果，分析是否登录成功；
                                mui.alert("success","success");
                            },
                            error:function(xhr,type,errorThrown){
                                //异常处理；
                                mui.alert("boom","boom");
                            }
                        });
                        mui.toast("刷新成功！");
                        // mui.ajax("");
                        mui('#refreshContainer').pullRefresh().endPulldown();
                    } //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
                }
            }
        });
    </script>
</head>
<body>
<div class="mui-off-canvas-wrap mui-draggable mui-slide-in">
    <aside class="mui-off-canvas-left bg-slide" id="offCanvasSide">
        <div class="mui-scroll-wrapper">
            <div class="mui-scroll ">
				<div id="user" class="item item-shadow slide-user w-100 waves">
					<li class="pb-2">
						<img id="userIcon" class="radio-icon headicon-mine ml-2_5" src="img/headicon_default.jpg">
					</li>
					<div class="slide-user-shadow pt-2">
						<li class="">
							<a id="userName" class="slide-user-name text-white ml-2_5">Recomi</a>
						</li>
						<li class="pb-2">
							<a id="userId" class="slide-user-id text-white ml-2_5">ID:17304590134</a>
						</li>
					</div>
				</div>
				<ul id="list" class="list-group">
					<li class="list-group-item list-item-small item border-0 waves">
						<img class="list-icon" src="icons/search.svg" />
						<span class="list-icon-title">Search</span>
					</li>
					<li class="list-group-item list-item-small item border-0 waves">
						<img class="list-icon" src="icons/search.svg" />
						<span class="list-icon-title">Search</span>
					</li>
					<li class="list-group-item list-item-small item border-0 waves">
						<img class="list-icon" src="icons/search.svg" />
						<span class="list-icon-title">Search</span>
					</li>
                    <div class="list-group-item list-item-small item border-0">
                        <div class="list-underline"></div>
                    </div>
                    <li class="list-group-item list-item-small item border-0 waves">
                        <img class="list-icon" src="icons/search.svg" />
                        <span class="list-icon-title">Search</span>
                    </li>
                    <li class="list-group-item list-item-small item border-0 waves">
                        <img class="list-icon" src="icons/search.svg" />
                        <span class="list-icon-title">Search</span>
                    </li>
				</ul>


            </div>
        </div>
    </aside>
    <div class="mui-inner-wrap" >
        <header class="mui-bar mui-bar-nav">
            <a class="mui-icon mui-action-menu mui-pull-left radio-icon waves" href="#offCanvasSide">
				<img src="icons/menuunfold.svg">
			</a>
            <h1 class="mui-title">轻云校园</h1>
			<a class="mui-icon mui-action-menu mui-pull-right radio-icon waves">
				<img src="icons/search.svg">
			</a>
        </header>

        <div id="refreshContainer" class="mui-content bg-content">
            <div id="main" class="mui-scroll">
                <div class="mui-slider">
                    <div class="mui-slider-group mui-slider-loop openWindow">
                        <!--支持循环，需要重复图片节点-->
                        <div class="mui-slider-item mui-slider-item-duplicate">
                            <a class="" href="library.html"><img src="images/4.jpg" /></a>
                        </div>
                        <div class="mui-slider-item">
                            <a class="" href="library.html"><img src="images/1.jpg" /></a>
                        </div>
                        <div class="mui-slider-item">
                            <a class="" href="library.html"><img src="images/2.jpg" /></a>
                        </div>
                        <div class="mui-slider-item">
                            <a class="" href="library.html"><img src="images/3.jpg" /></a>
                        </div>
                        <div class="mui-slider-item">
                            <a class="" href="library.html"><img src="images/4.jpg" /></a>
                        </div>
                        <!--支持循环，需要重复图片节点-->
                        <div class="mui-slider-item mui-slider-item-duplicate">
                            <a class="" href="#"><img src="images/1.jpg" /></a>
                        </div>
                    </div>
                </div>
                <div class="mui-content">
                    <div class="mui-card">
                        <div class="mui-row openWindow">
                            <a>
                                <a href="library.html" class=" mui-col-sm-2 mui-col-xs-4 mui-text-center" data-ripple="ripple">
                                    <img class="mt-3" src="icons/ic_library.png"/>
                                    <p class="m-2">图书馆</p>
                                </a>
                            </a>
                            <a>
                                <a href="#" class=" mui-col-sm-2 mui-col-xs-4 mui-text-center" data-ripple="ripple">
                                    <img class="mt-3" src="icons/ic_curriculum.png"/>
                                    <p class="m-2">课程表</p>
                                </a>
                            </a>
                            <a>
                                <a href="#" class="mui-col-sm-2 mui-col-xs-4 mui-text-center waves">
                                    <img class="mt-3" src="icons/job.png"/>
                                    <p class="m-2">求职</p>
                                </a>
                            </a>
                            <a>
                                <a href="#" class="mui-col-sm-2 mui-col-xs-4 mui-text-center waves">
                                    <img class="mt-3" src="icons/ic_associations.png"/>
                                    <p class="m-2">社团</p>
                                </a>
                            </a>
                            <a>
                                <a href="circle.html" class="mui-col-sm-2 mui-col-xs-4 mui-text-center waves">
                                    <img class="mt-3" src="icons/ic_cricle.png"/>
                                    <p class="m-2">圈子</p>
                                </a>
                            </a>
                            <a>
                                <a href="#" class="mui-col-sm-2 mui-col-xs-4 mui-text-center waves">
                                    <img class="mt-3" src="icons/ic_curriculum.png"/>
                                    <p class="m-2">未定</p>
                                </a>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="mui-card d-block waves">
                    <div class="mui-card-header mui-card-media">
                        <img src="icons/ic_book.svg"/>
                        <div class="mui-media-body " style="line-height: 36px;">
                            <p>今日课程</p>
                        </div>
                        <div class="mui-card-content">
                            <div class="mui-row">
                                <div class="mui-col-sm-6 mui-col-xs-6 mui-text-center">
                                    <p>数据结构和算法（1-2节）</p>
                                    <p>高等数学（3-4节）</p>
                                    <p>体育与运动（5-6节）</p>
                                </div>
                                <div class="mui-col-sm-6 mui-col-xs-6 mui-text-center">
                                    <p>Java高级设计（7-8节）</p>
                                    <p>晚修（9-10节）</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mui-card d-block waves">
                    <div class="mui-card-header mui-card-media">
                        <img src="icons/ic_weather.svg"/>
                        <div class="mui-media-body " style="line-height: 36px;">
                            <p>近况天气</p>
                        </div>
                        <div class="mui-card-content">
                            <div class="mui-row">
                                <div class=" mui-col-xs-3 mui-text-center">
							<span id="">
								<img src="icons/ic_weather_cloudy.svg"/>
							</span>
                                    <p>晴转多云</p>
                                    <p>今天15°C</p>
                                </div>
                                <div class=" mui-col-xs-3 mui-text-center">
							<span id="">
								<img src="icons/ic_weather_cloudy.svg "/>
							</span>
                                    <p>晴转多云</p>
                                    <p>明天15°C</p>
                                </div>
                                <div class=" mui-col-xs-3 mui-text-center">
							<span id="">
								<img src="icons/ic_weather_fine.svg"/>
							</span>
                                    <p>多云转晴</p>
                                    <p>后天25°C</p>
                                </div>
                                <div class="mui-col-xs-3 mui-text-center">
							<span id="">
								<img src="icons/ic_weather_fine.svg"/>
							</span>
                                    <p>多云转晴</p>
                                    <p>周六26°C</p>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mui-off-canvas-backdrop"></div>
        </div>
    </div>

</div>

<script type="text/javascript">
	 // jQuery(document).ready(function ($) {
		//  $.ajax({
		// 	 url: "minUI.html",
		// 	 type: "GET",
		// 	 success: function (data) {
		// 		 // alert("success");
		// 		 $("#main").append(data);
		// 	 },
		// 	 error:function (msg) {
		// 		 alert("error: " + msg);
		// 	 }
		//  });
	 // });
</script>
<script type="text/javascript">
    Waves.init();
    Waves.attach('.waves');
</script>
</body>
</html>

<script type="text/javascript">
	var gallery = mui('.mui-slider');
	gallery.slider({
		interval: 5000 //自动轮播周期，若为0则不自动播放，默认为0；
	});
	mui("body").on("tap", "#user", function () {
        mui.openWindow({
            url: "login.html",
            // id: 'this.href',
            show:{
                autoShow: true,
                aniShow: 'slide-in-right',
                duration: '200'
            }
        });
    });
	mui("#list").on("tap", "li", function () {
        mui.openWindow({
            // url: this.href,
            // id: 'this.href',
            show:{
                autoShow: true,
                aniShow: 'slide-in-right',
                duration: '200'
            }
        });
    })
</script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
	new Ripple({
		opacity : 0.2,  //水波纹透明度
		speed : 0.6,      //水波纹扩散速度
		bgColor : "#111", //水波纹颜色
		cursor : false  //是否显示手型指针
	})
</script>
<script>
mui.init({
	statusBarBackground: '#f7f7f7'
});
var aniShow = "pop-in";
var menu = null,
	showMenu = false;
var isInTransition = false;
var _self;
//只有ios支持的功能需要在Android平台隐藏；
if(mui.os.android) {
	var list = document.querySelectorAll('.ios-only');
	if(list) {
		for(var i = 0; i < list.length; i++) {
			list[i].style.display = 'none';
		}
	}
	//Android平台暂时使用slide-in-right动画
	if(parseFloat(mui.os.version) < 4.4) {
		aniShow = "slide-in-right";
	}
}
//初始化，并预加载webview模式的选项卡			
function preload() {

	var menu_style = {
		left: "-70%",
		width: '70%',
		popGesture: "none",
		render:"always"
	};

	if(mui.os.ios) {
		menu_style.zindex = -1;
	}

	//处理侧滑导航，为了避免和子页面初始化等竞争资源，延迟加载侧滑页面；
	menu = mui.openWindow({
		id: 'index-menu',
		url: 'index-menu.html',
		styles: menu_style,
		show: {
			aniShow: 'none'
		},
		waiting: {
			autoShow: false
		}
	});
}
mui.plusReady(function() {
	//读取本地存储，检查是否为首次启动
	var showGuide = plus.storage.getItem("lauchFlag");
	//仅支持竖屏显示
	plus.screen.lockOrientation("portrait-primary");
	if(showGuide) {
		//有值，说明已经显示过了，无需显示；
		//关闭splash页面；
		plus.navigator.closeSplashscreen();
		plus.navigator.setFullscreen(false);
		//预加载
		preload();
	} else {
		//显示启动导航
		mui.openWindow({
			id: 'guide',
			url: 'guide.html',
			styles: {
				popGesture: "none"
			},
			show: {
				aniShow: 'none'
			},
			waiting: {
				autoShow: false
			}
		});
		//延迟的原因：优先打开启动导航页面，避免资源争夺
		setTimeout(function() {
			//预加载
			preload();
		}, 200);
	}

	//绘制顶部图标
	_self = plus.webview.currentWebview();
	var titleView = _self.getNavigationbar();

	if(!titleView) {
		titleView = plus.webview.getLaunchWebview().getNavigationbar();
	}

	titleView.drawRect("#cccccc", {
		top: "43px",
		height:"1px",
		left: "0px"
	}); //绘制底部边线

	//开启回弹
	_self.setStyle({
		bounce: "vertical",
		bounceBackground:"#efeff4",
		popGesture:'none'//首页有侧滑菜单，因此屏蔽首页的侧滑关闭功能
	});

	//绘制左上角menu图标
	var bitmap_menu = new plus.nativeObj.Bitmap("menu");
	bitmap_menu.loadBase64Data("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEUAAAAAev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8AAABINtoqAAAADHRSTlMA/fPQ0M/e3tzs7OjgY5g4AAAAAWJLR0QAiAUdSAAAAAd0SU1FB+EBFwEbOGGUPSIAAAA2SURBVDjLY2AY9oDxDBZwCJ8EswsW4DrQ/hicgPTQZSvHAioG2h+DE5AeupyrsIDVA+0PqgEAu36BkQX5nBQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDEtMjNUMDE6Mjc6NTYrMDg6MDC8FK1uAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTAxLTIzVDAxOjI3OjU2KzA4OjAwzUkV0gAAAABJRU5ErkJggg==");
	titleView.drawBitmap(bitmap_menu, {}, {
		top: "10px",
		left: "10px",
		width: "24px",
		height: "24px"
	});

	var about_left = window.innerWidth - 34;
	var bitmap = new plus.nativeObj.Bitmap("about");
	bitmap.loadBase64Data("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAHdElNRQfhARcBEina5qaZAAAB10lEQVRYw+2XP0vDQBiHf7Wlq63gLAgV/QpOBnEpZHJycBL6Lq2LuFq6Kn6AK2RxKQhu2aS0XQT7DbTgLqVGR4OlDtL8uUu8S3Lape/Wy93z5L1r7t4DlrHoyCXrznZRhEsPWgUsj0PUsC886KKNO5pmErAKWjj6tUsHTRqlErBVXONEaR4snNFHQgHbQ08JPg+D+lHNKzH4ekI80GP1qOZ8JP4ClwnxAFA1Z/ZAQcDqqfAAYJgTexhuEtYg8dwLkvBacAJWxlsmPACskeP/4Bf5KjOeY4QyYBU8SwZv4x2P2JD02vI/vXAGLcnAFj3RK06lOQQ4gQwU5v8FO3Bxg2OpwluHQqDxQDpsE5/SPnPWrThFNcXBKuGxvClieXxpFACFn43cz6CsNMygHAylnmV+ita1vr/HS5qBeggZFDULirzA1SxweYGTEhQXDi8YaxaM/zsDmqKrEd+d10vBraKtUeCxgoJ7jQKPFRCQg44mfMc/NJOeaGoRd6LRCJYGvBWsVflD/1yDIMTgBOQobsbxYVDoixJqU+qjkQHf4EvgiNLRHpqzlHk0SairIotfe2BOUE3x9hFl26LuBwD1UVL+01ooReMXe0fzJH95yxRkie/Jy5DGN/4FegI2+YzMAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTAxLTIzVDAxOjE4OjQxKzA4OjAw3fCu8gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0wMS0yM1QwMToxODo0MSswODowMKytFk4AAAAASUVORK5CYII=");
	titleView.drawBitmap(bitmap, {}, {
		top: "10px",
		left: about_left + "px",
		width: "24px",
		height: "24px"
	});

	titleView.interceptTouchEvent(true);
	titleView.addEventListener("click", function(e) {
		var x = e.clientX;
		if(x < 44) { //触发menu菜单
			var _left = parseInt(_self.getStyle().left);
			if(_left > 0) { //处于显示状态
				closeMenu();
			} else {
				openMenu();
			}
		} else if(x > about_left) { //触发关于页面
			var aniShow = mui.os.plus ? "slide-in-right" : "zoom-fade-out";
			mui.openWindow({
				url: "examples/info.html",
				id: "info",
				styles: {
					popGesture: "close",
					statusbar: {
						background: "#f7f7f7"
					}
				},
				show: {
					aniShow: aniShow,
					duration: 300
				}
			});
		}
	}, false);

	//启用侧滑拖拽操作，延时的原因是menu页是延时创建的，所以这里需要相应延时
	setTimeout(function() {
		_self.drag({
			direction: "right",
			moveMode: "followFinger"
		}, {
			view: menu,
			moveMode: "follow"
		}, function(e) {
			//console.log(JSON.stringify(e));
		});
	}, 350);


	// 原生图片预览仅新版本runtime支持，若引擎不支持，则隐藏；
	if(!plus.nativeUI.previewImage) {
		var previewImageNativeElem = document.getElementById('preview_image_native');
		previewImageNativeElem.className = previewImageNativeElem.className.replace('mui-plus-visible', 'mui-hidden');
	}
	
});
/**
 * 显示侧滑菜单
 */
function openMenu() {
	plus.webview.startAnimation({
			'view': _self,
			'styles': {
				'fromLeft': '0',
				'toLeft': "70%"
			},
			'action': 'show'
		}, {
			'view': menu,
			'styles': {
				'fromLeft': "-70%",
				'toLeft': '0'
			},
			'action': 'show'
		},
		function(e) {
			//console.log(JSON.stringify(e));
			if(e.id == menu.id) { //侧滑菜单打开
			}
		}.bind(this)
	)
};
/**
 * 关闭菜单
 */
function closeMenu() {
	plus.webview.startAnimation({
			'view': _self,
			'styles': {
				'fromLeft': '70%',
				'toLeft': "0"
			},
			'action': 'show'
		}, {
			'view': menu,
			'styles': {
				'fromLeft': "0",
				'toLeft': '-70%'
			},
			'action': 'show'
		},
		function(e) {
			console.log(JSON.stringify(e));
			if(e.id == _self.id) {}
		}.bind(this)
	)
};
window.addEventListener("menu:close", closeMenu);

var _toast = false;

mui.back = function() {
	if(parseInt(_self.getStyle().left) > 0) {
		closeMenu();
		return;
	}

	if(!_toast || !_toast.isVisible()) {
		_toast = mui.toast('再按一次返回键退出<br>点此可&nbsp;<span style="border-bottom:1px solid #fff" onclick="openFeedback();">反馈意见</span>', {
			duration: 'long',
			type: 'div'
		});
	} else {
		plus.runtime.quit();
	}
};
</script>
<script>
    mui('.openWindow').on('tap','a',function(){
        mui.openWindow({
            url: this.href,
            // id: 'this.href',
            show:{
                autoShow: true,
                aniShow: 'slide-in-right',
                duration: '200'
            }
        });
    });
</script>